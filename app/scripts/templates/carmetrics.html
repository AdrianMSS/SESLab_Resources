<div class="row col-xs-12 center ui-widget">
	<button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" data-toggle="modal" data-target="#metricModal">
	  Añadir Métrica de Automóvil
	</button>
	<br>
	<br>
	<span id="checkBadge" class="material-icons mdl-badge hidden" data-badge="+1">check_circle</span>
	<br>
  <div class="tableDiv">
  	<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
  	  <thead>
  	    <tr>
  	      <th class="mdl-data-table__cell--non-numeric">ID</th>
  	      <th>Dispositivo</th>
  	      <th>Descripción</th>
          <th>Usuario</th>
          <th>Fecha</th>
          <th>Mes</th>
          <th>Año</th>
          <th>Litros</th>
          <th>Km</th>
          <th>Monto</th>
          <th>Factura</th>
          <th>Editar</th>
  	      <th>Eliminar</th>
  	    </tr>
  	  </thead>
  	  <tbody>
        <% var modalId = 0;
        _.each(models, function(i) {%>
  		    <tr>
  		      <td class="mdl-data-table__cell--non-numeric"><%=i.attributes._id%></td>
  		      <td><%=i.attributes.ID%></td>
            <td><%=devices[i.attributes.ID]%></td>
            <td><%=users[i.attributes.user]%></td>
            <td><%=i.attributes.date%></td>
            <td><%=months[i.attributes.month]%></td>
            <td><%=i.attributes.year%></td>
            <td><%=i.attributes.liters%></td>
            <td><%=i.attributes.km%></td>
            <td><%=i.attributes.amount%></td>
            <td><%=i.attributes.bill%></td>
            <td>
            <span type="button" class="edit" value=<%=modalId%> data-toggle="modal" data-target=<%='#'+modalId+"modal"%>><a class="glyphicon glyphicon-pencil" data-toggle="tooltip" data-placement="right" title="Editar" data-original-title="Editar"></a> </span>
            </td>
  		      <td><li type="button" class="delete" id=<%=i.attributes._id+"Delete"%>><a class="glyphicon glyphicon-remove" data-toggle="tooltip" data-placement="right" title="Eliminar" data-original-title="Eliminar"></a></li></td>
  		    </tr>
  		  <%modalId++;});%>
  	  </tbody>
  	</table>
  </div>
</div>


<div class="modal fade" id="metricModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="closeModal">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Añadir Métrica</h4>
      </div>
      <div class="modal-body">
        <div class="row">       
          <div class="col-xs-5 col-sm-5">            
            <label>Identificador del Dispositivo</label>
          </div> 
          <div class="col-xs-4 col-sm-4">
            <div class="ui-widget">
              <input id="metricDevice" class="metricDevice" maxlength="80">
            </div>
          </div>
          <br>
          <br>
        </div>
        <div class="row">       
          <div class="col-xs-5 col-sm-5">            
            <label>Identificador del Usuario</label>
          </div> 
          <div class="col-xs-4 col-sm-4">
            <div class="ui-widget">
              <input id="metricUser" class="metricUser" maxlength="80">
            </div>
          </div>
          <br>
          <br>
        </div>
        <div class="row">       
          <div class="col-xs-5 col-sm-5">            
            <label>Litros</label>
          </div> 
          <div class="col-xs-6 col-sm-6">
            <input type="number" class="metricValue" min="0" value=0></input> 
          </div>
          <br>
          <br>
        </div>
        <div class="row">       
          <div class="col-xs-5 col-sm-5">            
            <label>Km</label>
          </div> 
          <div class="col-xs-6 col-sm-6">
            <input type="number" class="metricValue2" min="0" value=0></input> 
          </div>
          <br>
          <br>
        </div>
        <div class="row">       
          <div class="col-xs-5 col-sm-5">            
            <label>Monto</label>
          </div> 
          <div class="col-xs-6 col-sm-6">
            <input type="number" class="metricValue3" min="0" value=0></input> 
          </div>
          <br>
          <br>
        </div>
        <div class="row">       
          <div class="col-xs-5 col-sm-5">            
            <label>Factura</label>
          </div> 
          <div class="col-xs-6 col-sm-6">
            <input type="number" class="metricValue4" min="0" value=0></input> 
          </div>
          <br>
          <br>
        </div>
        <div class="row">       
          <div class="col-xs-5 col-sm-5">            
            <label>Fecha</label>
          </div> 
          <div class="col-xs-6 col-sm-6">
            <input type="text" id="datepicker" class="metricDate">
          </div>
          <br>
          <br>
        </div>
      </div>  
      <div class="modal-footer">        
        <button type="button" class="btn btn-default closeModal" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary saveMetric" id="buttonFile">Agregar</button>
      </div>
    </div>
  </div>
</div>

<% var modalID = 0;
_.each(models, function(i) {%>
  <div class="modal fade" id=<%=modalID+"modal"%> tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="closeModal">&times;</button>
          <h4 class="modal-title" id="myModalLabel">Editar Métrica</h4>
        </div>
        <div class="modal-body">
          <div class="row">       
            <div class="col-xs-5 col-sm-5">            
              <label>Identificador del Dispositivo</label>
            </div> 
            <div class="col-xs-4 col-sm-4">
              <input type="text" class=<%=modalID + "metricDevice"%> maxlength="80" value="<%=i.attributes.ID%>"></input> 
            </div>
            <br>
            <br>
          </div>
          <div class="row">       
            <div class="col-xs-5 col-sm-5">            
              <label>Identificador del Usuario</label>
            </div> 
            <div class="col-xs-4 col-sm-4">
              <input type="text" class=<%=modalID + "metricUser"%> maxlength="80" value="<%=i.attributes.user%>"></input> 
            </div>
            <br>
            <br>
          </div>
          <div class="row">       
            <div class="col-xs-5 col-sm-5">            
              <label>Litros</label>
            </div> 
            <div class="col-xs-4 col-sm-4">
              <input type="number" class=<%=modalID + "metricValue"%> min="0" value="<%=i.attributes.liters%>"></input> 
            </div>
            <br>
            <br>
          </div>
          <div class="row">       
            <div class="col-xs-5 col-sm-5">            
              <label>Km</label>
            </div> 
            <div class="col-xs-4 col-sm-4">
              <input type="number" class=<%=modalID + "metricValue2"%> min="0" value="<%=i.attributes.km%>"></input> 
            </div>
            <br>
            <br>
          </div>
          <div class="row">       
            <div class="col-xs-5 col-sm-5">            
              <label>Monto</label>
            </div> 
            <div class="col-xs-4 col-sm-4">
              <input type="number" class=<%=modalID + "metricValue3"%> min="0" value="<%=i.attributes.amount%>"></input> 
            </div>
            <br>
            <br>
          </div>
          <div class="row">       
            <div class="col-xs-5 col-sm-5">            
              <label>Factura</label>
            </div> 
            <div class="col-xs-4 col-sm-4">
              <input type="number" class=<%=modalID + "metricValue4"%> min="0" value="<%=i.attributes.bill%>"></input> 
            </div>
            <br>
            <br>
          </div>
          <div class="row">       
            <div class="col-xs-5 col-sm-5">            
              <label>Fecha</label>
            </div> 
            <div class="col-xs-4 col-sm-4">
              <input type="text" class=<%=modalID + "metricDate"%> value="<%=i.attributes.date%>"></input> 
            </div>
            <br>
            <br>
          </div>
        </div>  
        <div class="modal-footer">        
          <button type="button" class="btn btn-default closeModal" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary saveEdit" value=<%=modalID%> id=<%=i.attributes._id%>>Editar</button>
        </div>
      </div>
    </div>
  </div>
<%modalID++;});%> 

<script type="text/javascript">
  // When the document is ready
  $(document).ready(function () {
      
    $( ".glyphicon-plus" ).tooltip();

    $( ".glyphicon-pencil" ).tooltip();

    $( ".glyphicon-remove" ).tooltip();
  
  });
</script>